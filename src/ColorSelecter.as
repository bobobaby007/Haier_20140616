package  {	import flash.display.MovieClip;	import flash.events.MouseEvent;	import flash.events.Event;	import flash.ui.Mouse	import flash.display.Bitmap;	import flash.display.BitmapData;	public class ColorSelecter extends MovieClip{		private var _picker:MovieClip		static public var EVENT_COLOR_SELECTED:String="EVENT_COLOR_SELECTED"		static public var EVENT_COLOR_OVER:String="EVENT_COLOR_OVER"		static public var EVENT_COLOR_OUT:String="EVENT_COLOR_OUT"		static public var EVENT_COLOR_MOVE:String="EVENT_COLOR_MOVE"		private var _barBitmap:Bitmap		private var _barBitmapData:BitmapData		private var _color:Number		private var _colorBar:MovieClip		private var _overColor:Number		private var _isDown:Boolean=false		public function ColorSelecter() {			setup()		}		private function setup(){			_colorBar=_colorbar_mc			_barBitmapData=new BitmapData(_colorBar.width,_colorBar.height)			_barBitmapData.draw(_colorBar)						_picker=_picker_mc			_picker.rotation=30			_picker.visible=false			_picker.mouseChildren=false			_picker.mouseEnabled=false			_colorBar.addEventListener(MouseEvent.MOUSE_DOWN,mouseHander)			_colorBar.addEventListener(MouseEvent.MOUSE_OVER,mouseHander)			_colorBar.addEventListener(MouseEvent.MOUSE_MOVE,mouseHander)			_colorBar.addEventListener(MouseEvent.MOUSE_OUT,mouseHander)								}				private function mouseHander(event:MouseEvent){			switch(event.type){				case MouseEvent.MOUSE_MOVE:							if(_isDown){						_Color=_barBitmapData.getPixel(mouseX,mouseY)						this.dispatchEvent(new Event(EVENT_COLOR_SELECTED))					}else{						_Over_Color=_barBitmapData.getPixel(mouseX,mouseY)						this.dispatchEvent(new Event(EVENT_COLOR_MOVE))					}									break				case MouseEvent.MOUSE_OVER:					this.addEventListener(Event.ENTER_FRAME,enterFrameHander)					_picker.visible=true					Mouse.hide()					this.dispatchEvent(new Event(EVENT_COLOR_OVER))				break				case MouseEvent.MOUSE_DOWN:					_isDown=true					_Color=_barBitmapData.getPixel(mouseX,mouseY)					this.dispatchEvent(new Event(EVENT_COLOR_SELECTED))					stage.addEventListener(MouseEvent.MOUSE_UP,mouseHander)				break				case MouseEvent.MOUSE_OUT:					Mouse.show()					_picker.visible=false										this.removeEventListener(Event.ENTER_FRAME,enterFrameHander)					this.dispatchEvent(new Event(EVENT_COLOR_OUT))									break				case MouseEvent.MOUSE_UP:					_isDown=false					stage.removeEventListener(MouseEvent.MOUSE_UP,mouseHander)				break			}		}		private function enterFrameHander(event:Event){			_picker.x=mouseX			_picker.y=mouseY		}		public function set _Color(__set:Number){			_color=__set		}		public function get _Color():Number{			return _color		}		public function set _Over_Color(__set:Number){			_overColor=__set		}		public function get _Over_Color():Number{			return _overColor		}					}	}
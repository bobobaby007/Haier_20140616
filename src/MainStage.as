package  {	import flash.display.MovieClip;	import flash.system.Security	import flash.display.StageAlign	import flash.display.StageScaleMode		import flash.events.Event;	import flash.events.MouseEvent;	import gs.TweenLite	import gs.easing.Expo	import flash.display.Loader;	import flash.net.URLRequest;	import flash.system.LoaderContext;	import com.google.analytics.GATracker	import com.google.analytics.AnalyticsTracker		public class MainStage extends MovieClip{		static public var _self:MainStage		static public var _stageScale:Number=1		private var _GAId:String="UA-48201726-27"//-------https://www.google.com/analytics/ 谷歌检测		public var _GATracker:AnalyticsTracker		private var _playerLoader:Loader		private var _playerUrl:String="http://t.douban.com/img/files/file-1402330454825546.swf"		public function MainStage() {			_self=this								Security.allowDomain("*")			Security.allowInsecureDomain("*")			if(stage){				stage.scaleMode=StageScaleMode.NO_SCALE				stage.align=StageAlign.TOP_LEFT			}						setup()		}		private function setup(){			if(stage){				stage.addEventListener(Event.RESIZE,resizeHander)					resizeHander(null)					_GATracker=new GATracker( this, _GAId, "AS3",false );			}else{				this.addEventListener(Event.ADDED_TO_STAGE,addToStageHander)			}		}		private function addToStageHander(event:Event){			this.dispatchEvent(new Event("EVENT_IN"))			//---------设置GA 设置对象			_GATracker=new GATracker( this, _GAId, "AS3",false );			MainStage._self._GATracker.trackPageview("/index_"+DouBan._Self._siteName)			//--			stage.addEventListener(Event.RESIZE,resizeHander)																			resizeHander(null)			}		private function resizeHander(event:Event){								if(!_playerLoader){				_playerLoader=new Loader()				_playerLoader.load(new URLRequest(_playerUrl))				addChild(_playerLoader)			}			_playerLoader.scaleX=_playerLoader.scaleY=.6			_playerLoader.x=40			_playerLoader.y=stage.stageHeight-160					var _scale_h:Number=stage.stageHeight/600			var _scale_w:Number=stage.stageWidth/960									_stageScale=Math.min(_scale_h,_scale_w)			_stageScale=Math.max(0.5,_stageScale)			_stageScale=Math.min(1.4,_stageScale)											_bg_mc.scaleX=_bg_mc.scaleY=Math.max(_scale_h,_scale_w)						_bg_mc.x=.5*stage.stageWidth			_bg_mc.y=stage.stageHeight						_slogan.x=stage.stageWidth-15						TopBar._self.x=.5*stage.stageWidth			OkMessage._self.x=.5*stage.stageWidth						AgeSelecterBoard._self.x=.5*stage.stageWidth			AgeSelecterBoard._self.y=.5*stage.stageHeight									PhonePage._self.x=.5*stage.stageWidth			PhonePage._self.y=.5*stage.stageHeight									HandOrKeyboard._self.x=.5*stage.stageWidth			HandOrKeyboard._self.y=.5*stage.stageHeight												PhoneDefaultPage._self.x=.5*stage.stageWidth			PhoneDefaultPage._self.y=.5*stage.stageHeight						PreloaderM._self.x=.5*stage.stageWidth			PreloaderM._self.y=.5*stage.stageHeight									ShareButtons._self.x=.5*stage.stageWidth			ShareButtons._self.y=stage.stageHeight-30			//_bg.width=stage.stageWidth			//_bg.height=stage.stageHeight						BottomButtons._self.x=stage.stageWidth-12			BottomButtons._self.y=stage.stageHeight-12						StepButtons._self.x=stage.stageWidth-50			StepButtons._self.y=stage.stageHeight-138						BottomPanel._self.x=.5*stage.stageWidth			BottomPanel._self.y=stage.stageHeight									MaskMain._self.width=stage.stageWidth			MaskMain._self.height=stage.stageHeight									FinalePhoneQR._self.x=stage.stageWidth-50			FinalePhoneQR._self.y=stage.stageHeight-120												//NeedLog._self.scaleX=NeedLog._self.scaleY=_stageScale						//OkMessage._self.x=.5*stage.stageWidth			//OkMessage._self.y=.5*stage.stageHeight			NeedLog._self.x=.5*stage.stageWidth			NeedLog._self.y=.5*stage.stageHeight						WorkBoard._self.x=.5*stage.stageWidth-275			WorkBoard._self.y=.5*stage.stageHeight-200		}							}	}
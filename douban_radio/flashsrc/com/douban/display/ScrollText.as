package com.douban.display {    import flash.events.TimerEvent;    import flash.utils.Timer;    import flash.display.Sprite;    import flash.text.TextField;    import flash.text.TextFormat;    public class ScrollText extends Sprite{        private var txt:TextField;        private var _text:String = '';        private var txtMask:Sprite;        private var showWidth;        private var timer:Timer;        private var fm:TextFormat;        private var origWidth, doubleWidth;        public function ScrollText(w) {            showWidth = w;            txt = new TextField;            txt.autoSize = flash.text.TextFieldAutoSize.LEFT;            txt.selectable = false;            fm = new TextFormat("Arial", 12, 0xffffff);            txtMask = new Sprite;            addChild(txt);            addChild(txtMask);            txtMask.graphics.beginFill(0x000000);            txtMask.graphics.drawRect(0, 0, showWidth, 30);            txt.mask = txtMask;            timer = new Timer(40);            timer.addEventListener(TimerEvent.TIMER, onTimer);            resetScroll();        }        private function resetScroll() {            txt.text = _text;            txt.x = 0;            txt.setTextFormat(fm);            origWidth = txt.textWidth;            if (origWidth > showWidth) {                txt.text = _text + '   ' + _text;                txt.setTextFormat(fm);                doubleWidth = txt.textWidth;                timer.start();            } else {                timer.stop();            }        }        private function onTimer(e){            txt.x -= 1;            if (txt.x + doubleWidth <= origWidth){                txt.x = 0;            }        }        public function get text(){            return _text;        }        public function set text(t){            _text = t;            resetScroll();        }        public function get textWidth(){            return Math.min(txt.textWidth, showWidth);        }        public function get maxWidth(){            return showWidth;        }    }}